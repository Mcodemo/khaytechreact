"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[2527],{22527:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var t=r(15861),o=r(87757),a=r.n(o),i=r(97890),c=r(88564),s=r(43265),d=r(57829),l=r(61113),u=r(47723),m=r(58908),f=r(33896),h=r(48175),v=r(71361),p=(r(42593),r(1413)),g=r(28089),x=r(47313),w=r(75627),Z=r(1432),j=r(35898),b=r(49914),y=r(32703),k=r(85077),q=r(46417);function _(){var e=(0,i.s0)(),n=(0,m.Ds)().enqueueSnackbar,r=window.localStorage.getItem("resetemail");null==r&&(window.location.href=h.EE.login,e(h.EE.login));var o=g.Ry().shape({code1:g.Z_().required("Code is required"),code2:g.Z_().required("Code is required"),code3:g.Z_().required("Code is required"),code4:g.Z_().required("Code is required"),code5:g.Z_().required("Code is required"),code6:g.Z_().required("Code is required")}),c=(0,w.cI)({mode:"onBlur",resolver:(0,Z.X)(o),defaultValues:{code1:"",code2:"",code3:"",code4:"",code5:"",code6:""}}),s=c.watch,d=c.control,l=c.setValue,u=c.handleSubmit,f=c.formState,v=f.isSubmitting,_=f.isValid,E=s();(0,x.useEffect)((function(){document.addEventListener("paste",S)}),[]);var C=function(){var o=(0,t.Z)(a().mark((function t(o){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:console.log("code:",Object.values(o).join("")),k.Z.post("/password/verify-code",{email:r,code:Object.values(o).join("")}).then((function(r){if(console.log(r),console.log(r.data),200===r.data.code){var t=Object.values(o).join("");n(r.data.message),window.localStorage.removeItem("resetemail"),window.localStorage.setItem("resettoken",t),e(h.EE.newpassword,{replace:!0})}else n(r.data.message,{variant:"error"})})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return o.apply(this,arguments)}}(),S=function(e){var n,r=(null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text"))||"";r=r.split(""),[].forEach.call(document.querySelectorAll("#field-code"),(function(e,n){e.value=r[n];var t="code".concat(n+1);l(t,r[n])}))};return(0,q.jsxs)("form",{onSubmit:u(C),children:[(0,q.jsx)(j.Z,{direction:"row",spacing:2,justifyContent:"center",children:Object.keys(E).map((function(e,n){return(0,q.jsx)(w.Qr,{name:"code".concat(n+1),control:d,render:function(e){var r=e.field;return(0,q.jsx)(b.Z,(0,p.Z)((0,p.Z)({},r),{},{id:"field-code",autoFocus:0===n,placeholder:"-",onChange:function(e){return function(e,n){var r=e.target,t=r.maxLength,o=r.value,a=r.name.replace("code",""),i=Number(a);if(o.length>=t&&i<6){var c=document.querySelector("input[name=code".concat(i+1,"]"));null!==c&&c.focus()}n(e)}(e,r.onChange)},inputProps:{maxLength:1,sx:{p:0,textAlign:"center",width:{xs:36,sm:56},height:{xs:36,sm:56}}}}))}},e)}))}),(0,q.jsx)(y.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:v,disabled:!_,sx:{mt:3},children:"Verify"})]})}var E=(0,c.ZP)("div")((function(e){return{display:"flex",height:"100%",alignItems:"center",padding:e.theme.spacing(12,0)}}));function C(){var e=window.localStorage.getItem("resetemail"),n=(0,i.s0)();null==e&&(window.location.href=h.EE.login,n(h.EE.login));var r=(0,m.Ds)().enqueueSnackbar,o=function(){var n=(0,t.Z)(a().mark((function n(t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:k.Z.post("/resend-code",{email:e}).then((function(e){console.log(e.data),200===e.data.code?r(e.data.message):r(e.data.message,{variant:"error"})})),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}();return(0,q.jsx)(v.Z,{title:"Verify",sx:{height:1},children:(0,q.jsxs)(E,{children:[(0,q.jsx)(f.Z,{}),(0,q.jsx)(s.Z,{children:(0,q.jsxs)(d.Z,{sx:{maxWidth:480,mx:"auto"},children:[(0,q.jsx)(l.Z,{variant:"h3",paragraph:!0,children:"Please check your email!"}),(0,q.jsxs)(l.Z,{sx:{color:"text.secondary"},children:["We have emailed a 6-digit confirmation code to ",e,", please enter the code in box below to verify your email."]}),(0,q.jsx)(d.Z,{sx:{mt:5,mb:3},children:(0,q.jsx)(_,{})}),(0,q.jsxs)(l.Z,{variant:"body2",align:"center",children:["Don\u2019t have a code? \xa0",(0,q.jsx)(u.Z,{variant:"subtitle2",href:"#",underline:"none",onClick:o,children:"Resend code"})]})]})})]})})}}}]);